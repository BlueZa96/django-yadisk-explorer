{% extends "base.html" %}
{% load static %}

{% block extra_head %}
    <script src="{% static 'index.js' %}" defer></script>
{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2 class="text-center mb-4">–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ</h2>

        <!-- –í–≤–æ–¥ –ø—É–±–ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–∏ -->
        <div class="input-group mb-3">
            <input type="text" id="public_key" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É">
            <button class="btn btn-primary" onclick="fetchFiles()">–û–±–∑–æ—Ä</button>
        </div>

        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–∏ -->
        <div class="alert alert-info py-2 px-2" id="current_folder" style="display:none;">
            üìÅ <strong></strong>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Ñ–∞–π–ª–æ–≤ -->
        <div class="mt-3" id="file-type-filter" style="display:none;">
            <label for="file_type" class="form-label">–§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É:</label>
            <select id="file_type" class="form-select" onchange="updateFileExplorer()">
                <option value="">–í—Å–µ</option>
            </select>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è -->
        <div class="mt-3" id="download-buttons" style="display:none;">
            <button class="btn btn-secondary" onclick="selectAllItems()">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
            <button class="btn btn-primary" onclick="downloadSelectedItems()">–°–∫–∞—á–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã</button>
            <button class="btn btn-danger" onclick="clearSelection()">–û—á–∏—Å—Ç–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</button>
        </div>

        <!-- –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫ -->
        <div class="mt-3" id="file-explorer">
            <div class="list-group" id="explorer-items"></div>
        </div>

    </div>
{% endblock %}